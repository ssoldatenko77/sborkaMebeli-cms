<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сборка мебели в Гродно | Профессиональный мастер Сергей +375 (33) 377-35-56</title>
    <meta name="description" content="Сборка мебели на дому в Гродно: шкафы, кухни, диваны. Опыт 10+ лет, гарантия 1 год, выезд бесплатно.">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; color: #333; line-height: 1.6; position: relative; padding-bottom: 90px; }
        header { background: #007bff; color: white; padding: 25px 15px; text-align: center; }
        header h1 { margin: 0; font-size: 28px; }
        section { padding: 50px 20px; max-width: 1200px; margin: auto; }
        h2 { text-align: center; margin-bottom: 40px; }
        .services, .advantages { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 300px; text-align: center; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .gallery img { width: 100%; height: 240px; object-fit: cover; border-radius: 12px; box-shadow: 0 6px 15px rgba(0,0,0,0.1); transition: transform 0.3s; cursor: pointer; }
        .gallery img:hover { transform: scale(1.05); }
        .gallery p { text-align:center; margin:10px 0 0; color:#555; font-size:14px; }
        .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .review-card { background:white; padding:25px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
        .review-card p { font-style:italic; margin-bottom:15px; }
        .stars { color:#f39c12; font-size:20px; margin-top:10px; }
        form { max-width: 600px; margin: auto; display: grid; gap: 12px; }
        input, textarea, button { padding: 14px; font-size: 16px; border-radius: 8px; border: 1px solid #ddd; }
        button { background: #28a745; color: white; border: none; cursor: pointer; font-weight: bold; }
        footer { background: #333; color: white; text-align: center; padding: 25px; }
        .floating-call { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #28a745; color: white; padding: 16px 32px; border-radius: 50px; font-size: 18px; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 1000; text-decoration: none; display: none; }
        @media (max-width: 768px) { .card { width: 100%; } header h1 { font-size: 22px; } .floating-call { display: block; } }
    </style>
</head>
<body>

    <header>
        <h1>Профессиональная сборка мебели в Гродно</h1>
        <p style="font-size:24px;">Быстро • Качественно • С гарантией</p>
        <p style="font-size:28px;">
            <a href="tel:+375333773556" style="color:white;text-decoration:none;">+375 (33) 377-35-56</a>
        </p>
        <p>Звоните прямо сейчас!</p>
    </header>

    <section id="services">
        <h2>Мои услуги</h2>
        <div class="services">
            <div class="card"><h3>Сборка корпусной мебели</h3><p>Шкафы, комоды, стенки, столы</p></div>
            <div class="card"><h3>Сборка и установка кухонь</h3><p>Навеска шкафов, врезка моек и техники</p></div>
        </div>
    </section>

    <section id="advantages" style="background:#fff;">
        <h2>Почему выбирают меня</h2>
        <div class="advantages">
            <div class="card"><h3>Опыт 10+ лет</h3><p>Более 5000 единиц мебели</p></div>
            <div class="card"><h3>Гарантия 1 год</h3><p>Исправлю бесплатно</p></div>
            <div class="card"><h3>Свой инструмент</h3><p>Аккуратность и уборка</p></div>
            <div class="card"><h3>Честные цены</h3><p>Выезд по Гродно бесплатно</p></div>
        </div>
    </section>

    <section id="portfolio" style="background:#fff;">
        <h2>Примеры выполненных работ</h2>
        <div class="gallery" id="gallery">
            <!-- Фото будут подгружаться из CMS автоматически -->
        </div>
    </section>

    <section id="reviews" style="background:#fff;">
        <h2>Отзывы клиентов</h2>
        <div class="reviews-grid" id="reviews-grid">
            <!-- Отзывы будут подгружаться из CMS -->
        </div>
    </section>

    <section id="contact">
        <h2>Заказать сборку</h2>
        <form id="tg-form">
            <input type="text" placeholder="Ваше имя" required>
            <input type="tel" placeholder="Телефон" required>
            <textarea placeholder="Опишите мебель или задайте вопрос" rows="5"></textarea>
            <div style="margin-top:10px;">
                <label>Прикрепите фото мебели (необязательно):<br>
                    <input type="file" id="photos" accept="image/*" multiple style="margin-top:8px;">
                </label>
            </div>
            <button type="submit">Отправить заявку</button>
        </form>

        <div id="success" style="display:none; text-align:center; padding:20px; background:#d4edda; color:#155724; border-radius:10px; margin-top:20px;">
            Спасибо! Заявка отправлена — перезвоню в ближайшее время
        </div>

        <p style="text-align: center; margin-top: 30px; font-size: 22px;">
            Или звоните: <a href="tel:+375333773556" style="color:#007bff;">+375 (33) 377-35-56</a><br>
            Работаю ежедневно с 8:00 до 21:00
        </p>
    </section>

    <footer>
        <p>© 2025 Сборка мебели в Гродно — Сергей. Все права защищены.</p>
    </footer>

    <a href="tel:+375333773556" class="floating-call">Позвонить +375 (33) 377-35-56</a>

    <!-- Подключение Netlify CMS -->
    <script src="https://unpkg.com/netlify-cms@^2.10.192/dist/netlify-cms.js"></script>

    <!-- Скрипт загрузки галереи и отзывов + форма Telegram -->
    <script>
        // Загрузка галереи
        fetch('static/collections/gallery.json')
            .then(r => r.json())
            .then(data => {
                const gallery = document.getElementById('gallery');
                data.forEach(item => {
                    const div = document.createElement('div');
                    div.innerHTML = `<img src="${item.image}" onclick="openLightbox(this)"><p>${item.description}</p>`;
                    gallery.appendChild(div);
                });
            })
            .catch(() => console.log('Галерея пока пустая'));

        // Загрузка отзывов
        fetch('static/collections/reviews.json')
            .then(r => r.json())
            .then(data => {
                const grid = document.getElementById('reviews-grid');
                data.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'review-card';
                    card.innerHTML = `<p style="font-style:italic;">"${item.text}"</p><strong>— ${item.name}, Гродно</strong><div class="stars">★★★★★</div>`;
                    grid.appendChild(card);
                });
            })
            .catch(() => console.log('Отзывы пока пустые'));

        // Твой скрипт формы (с фото)
        const TOKEN = '8252171821:AAGZhzmcQZYAyg4P7VRWZ02mgx8xNPk0WsM';
        const CHAT_ID = '1179244332';

        const form = document.getElementById('tg-form');
        const success = document.getElementById('success');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = form[0].value.trim() || 'Без имени';
            const phone = form[1].value.trim();
            const message = form[2].value.trim() || 'Без сообщения';
            const files = document.getElementById('photos').files;

            if (!phone) {
                alert('Укажите телефон');
                return;
            }

            const caption = `Новая заявка!\nИмя: ${name}\nТелефон: ${phone}\nСообщение: ${message}`;

            try {
                if (files.length > 0) {
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        if (file.size > 10 * 1024 * 1024) {
                            alert('Фото больше 10 МБ — сожмите');
                            return;
                        }
                        const formData = new FormData();
                        formData.append('chat_id', CHAT_ID);
                        formData.append('photo', file);
                        if (i === 0) formData.append('caption', caption);

                        const resp = await fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`, {
                            method: 'POST',
                            body: formData
                        });

                        if (!resp.ok) throw new Error();
                    }
                } else {
                    await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ chat_id: CHAT_ID, text: caption })
                    });
                }

                form.reset();
                form.style.display = 'none';
                success.style.display = 'block';
            } catch {
                alert('Ошибка отправки. Звоните: +375 (33) 377-35-56');
            }
        });

        function openLightbox(img) {
            if (window.innerWidth > 768) {
                const lightbox = document.createElement('div');
                lightbox.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:9999;cursor:pointer;';
                const bigImg = document.createElement('img');
                bigImg.src = img.src;
                bigImg.style.maxWidth = '90%';
                bigImg.style.maxHeight = '90vh';
                bigImg.style.borderRadius = '12px';
                lightbox.appendChild(bigImg);
                lightbox.onclick = () => lightbox.remove();
                document.body.appendChild(lightbox);
            }
        }
    </script>
</body>
</html>